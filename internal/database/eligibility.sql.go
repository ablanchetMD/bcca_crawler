// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.27.0
// source: eligibility.sql

package database

import (
	"context"

	"github.com/google/uuid"
	"github.com/lib/pq"
)

const deleteEligibilityCriteria = `-- name: DeleteEligibilityCriteria :exec
DELETE FROM protocol_eligibility_criteria
WHERE id = $1
`

func (q *Queries) DeleteEligibilityCriteria(ctx context.Context, id uuid.UUID) error {
	_, err := q.db.ExecContext(ctx, deleteEligibilityCriteria, id)
	return err
}

const getElibilityCriteriaByDescription = `-- name: GetElibilityCriteriaByDescription :one
SELECT id, created_at, updated_at, type, description FROM protocol_eligibility_criteria
WHERE description = $1
`

func (q *Queries) GetElibilityCriteriaByDescription(ctx context.Context, description string) (ProtocolEligibilityCriterium, error) {
	row := q.db.QueryRowContext(ctx, getElibilityCriteriaByDescription, description)
	var i ProtocolEligibilityCriterium
	err := row.Scan(
		&i.ID,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.Type,
		&i.Description,
	)
	return i, err
}

const getEligibilityByProtocol = `-- name: GetEligibilityByProtocol :many
SELECT c.id, c.created_at, c.updated_at, c.type, c.description
FROM protocol_eligibility_criteria c
JOIN protocol_eligibility_criteria_values v ON c.id = v.criteria_id
WHERE v.protocol_id = $1
`

func (q *Queries) GetEligibilityByProtocol(ctx context.Context, protocolID uuid.UUID) ([]ProtocolEligibilityCriterium, error) {
	rows, err := q.db.QueryContext(ctx, getEligibilityByProtocol, protocolID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []ProtocolEligibilityCriterium
	for rows.Next() {
		var i ProtocolEligibilityCriterium
		if err := rows.Scan(
			&i.ID,
			&i.CreatedAt,
			&i.UpdatedAt,
			&i.Type,
			&i.Description,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getEligibilityCriteriaByID = `-- name: GetEligibilityCriteriaByID :one
SELECT id, created_at, updated_at, type, description FROM protocol_eligibility_criteria
WHERE id = $1
`

func (q *Queries) GetEligibilityCriteriaByID(ctx context.Context, id uuid.UUID) (ProtocolEligibilityCriterium, error) {
	row := q.db.QueryRowContext(ctx, getEligibilityCriteriaByID, id)
	var i ProtocolEligibilityCriterium
	err := row.Scan(
		&i.ID,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.Type,
		&i.Description,
	)
	return i, err
}

const getEligibilityCriteriaByType = `-- name: GetEligibilityCriteriaByType :many
SELECT id, created_at, updated_at, type, description FROM protocol_eligibility_criteria
WHERE type = $1
`

func (q *Queries) GetEligibilityCriteriaByType(ctx context.Context, type_ string) ([]ProtocolEligibilityCriterium, error) {
	rows, err := q.db.QueryContext(ctx, getEligibilityCriteriaByType, type_)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []ProtocolEligibilityCriterium
	for rows.Next() {
		var i ProtocolEligibilityCriterium
		if err := rows.Scan(
			&i.ID,
			&i.CreatedAt,
			&i.UpdatedAt,
			&i.Type,
			&i.Description,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const insertEligibilityCriteria = `-- name: InsertEligibilityCriteria :one
INSERT INTO protocol_eligibility_criteria (type, description)
VALUES ($1, $2)
RETURNING id, created_at, updated_at, type, description
`

type InsertEligibilityCriteriaParams struct {
	Type        string
	Description string
}

func (q *Queries) InsertEligibilityCriteria(ctx context.Context, arg InsertEligibilityCriteriaParams) (ProtocolEligibilityCriterium, error) {
	row := q.db.QueryRowContext(ctx, insertEligibilityCriteria, arg.Type, arg.Description)
	var i ProtocolEligibilityCriterium
	err := row.Scan(
		&i.ID,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.Type,
		&i.Description,
	)
	return i, err
}

const insertManyEligibilityCriteria = `-- name: InsertManyEligibilityCriteria :exec
INSERT INTO protocol_eligibility_criteria (type, description)
VALUES ($1::UUID[], $2::UUID[])
ON CONFLICT DO NOTHING
`

type InsertManyEligibilityCriteriaParams struct {
	Column1 []uuid.UUID
	Column2 []uuid.UUID
}

func (q *Queries) InsertManyEligibilityCriteria(ctx context.Context, arg InsertManyEligibilityCriteriaParams) error {
	_, err := q.db.ExecContext(ctx, insertManyEligibilityCriteria, pq.Array(arg.Column1), pq.Array(arg.Column2))
	return err
}

const linkEligibilityToProtocol = `-- name: LinkEligibilityToProtocol :exec
INSERT INTO protocol_eligibility_criteria_values (protocol_id, criteria_id)
VALUES ($1, $2)
`

type LinkEligibilityToProtocolParams struct {
	ProtocolID uuid.UUID
	CriteriaID uuid.UUID
}

func (q *Queries) LinkEligibilityToProtocol(ctx context.Context, arg LinkEligibilityToProtocolParams) error {
	_, err := q.db.ExecContext(ctx, linkEligibilityToProtocol, arg.ProtocolID, arg.CriteriaID)
	return err
}

const linkManyEligibilityToProtocol = `-- name: LinkManyEligibilityToProtocol :exec
INSERT INTO protocol_eligibility_criteria_values (protocol_id, criteria_id)
VALUES ($1::UUID[], $2::UUID[])
ON CONFLICT DO NOTHING
`

type LinkManyEligibilityToProtocolParams struct {
	Column1 []uuid.UUID
	Column2 []uuid.UUID
}

func (q *Queries) LinkManyEligibilityToProtocol(ctx context.Context, arg LinkManyEligibilityToProtocolParams) error {
	_, err := q.db.ExecContext(ctx, linkManyEligibilityToProtocol, pq.Array(arg.Column1), pq.Array(arg.Column2))
	return err
}

const unlinkEligibilityFromProtocol = `-- name: UnlinkEligibilityFromProtocol :exec
DELETE FROM protocol_eligibility_criteria_values
WHERE protocol_id = $1 AND criteria_id = $2
`

type UnlinkEligibilityFromProtocolParams struct {
	ProtocolID uuid.UUID
	CriteriaID uuid.UUID
}

func (q *Queries) UnlinkEligibilityFromProtocol(ctx context.Context, arg UnlinkEligibilityFromProtocolParams) error {
	_, err := q.db.ExecContext(ctx, unlinkEligibilityFromProtocol, arg.ProtocolID, arg.CriteriaID)
	return err
}

const updateEligibilityCriteria = `-- name: UpdateEligibilityCriteria :one
UPDATE protocol_eligibility_criteria
SET
    updated_at = NOW(),
    type = $2,
    description = $3
WHERE id = $1
RETURNING id, created_at, updated_at, type, description
`

type UpdateEligibilityCriteriaParams struct {
	ID          uuid.UUID
	Type        string
	Description string
}

func (q *Queries) UpdateEligibilityCriteria(ctx context.Context, arg UpdateEligibilityCriteriaParams) (ProtocolEligibilityCriterium, error) {
	row := q.db.QueryRowContext(ctx, updateEligibilityCriteria, arg.ID, arg.Type, arg.Description)
	var i ProtocolEligibilityCriterium
	err := row.Scan(
		&i.ID,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.Type,
		&i.Description,
	)
	return i, err
}
